{% extends 'layouts.html' %}

{%block marqueebar%}
{% for row in trends %}
  {{row[0]}} ${{row[1]}} &emsp;
{% endfor %}
{%endblock marqueebar%}

{%block chartbtns%}
<div class="btn-group me-2">
  <a href="{{wkbtc}}" class ="btn btn-sm btn-outline-secondary" role="button">Weekly</a>
  <a href="{{monbtc}}" class ="btn btn-sm btn-outline-secondary" role="button">Monthly</a>
  <a href="{{yrbtc}}" class ="btn btn-sm btn-outline-secondary" role="button">Yearly</a>
</div>
{%endblock chartbtns%}

{%block wkchart%}
<canvas class="my-4 w-90" id="chart" width="1100" height="400"></canvas>
<script>
  // bar chart data
  var lineData = {
    labels : [
      {% for item in labels %}
        "{{ item }}",
      {% endfor %}
    ],

    datasets : [{
      fillColor: "transparent",
      strokeColor: "rgba(151,187,205,1)",
      pointColor: "rgba(151,187,205,1)",
      pointStrokeColor: "#fff",
      pointHighlightFill: "#fff",
      pointHighlightStroke: "rgba(151,187,205,1)",
      bezierCurve : false,
      data : [
  {% for item in values %}
          "{{ item }}",
        {% endfor %}]
      }
]
  }

  Chart.defaults.global.animationSteps = 100;
  Chart.defaults.global.tooltipYPadding = 16;
  Chart.defaults.global.tooltipCornerRadius = 0;
  Chart.defaults.global.tooltipTitleFontStyle = "normal";
  Chart.defaults.global.tooltipFillColor = "rgba(0,0,0,0.8)";
  Chart.defaults.global.animationEasing = "easeOutBounce";
  Chart.defaults.global.responsive = true;
  Chart.defaults.global.scaleLineColor = "black";
  Chart.defaults.global.scaleFontSize = 16;

  // get bar chart canvas
  var mychart = document.getElementById("chart").getContext("2d");

  max = {{ max }}
  min = {{ min }}
  steps = 9
  // draw bar chart
  var LineChartDemo = new Chart(mychart).Line(lineData, {
    scaleOverride: true,
    scaleSteps: steps,
    scaleStepWidth: Math.ceil(max),
    scaleStartValue: min,
    scaleShowVerticalLines: true,
    scaleShowGridLines : true,
    barShowStroke : true,
    scaleShowLabels: true,
    bezierCurve: false,

  });

</script>
{%endblock wkchart%}

{%block newsfeed%}
{% for row in news %}
<tr>
  <td>{{row[1]}}</td>
  <td style="word-wrap: break-word;min-width: 100px; max-width: 450px;"><a href="{{row[2]}}">{{row[2]}}</a></td>
</tr>
{% endfor %}
{%endblock newsfeed%}

{%block comments%}
{% for row in comments %}
<tr>
  <td style="word-wrap: break-word;min-width: 100px; max-width: 450px;">{{row[0]}}</td>
  <td>{{row[1]}}</td>
  <td>{{row[2]}}</td>
  <td>{{row[3]}}</td>
</tr>
{% endfor %}
{%endblock comments%}
